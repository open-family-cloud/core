# ============================================================
# Open Family Cloud — パターン4: 自宅サーバー + WireGuard トンネル
# このファイルを home/.env および vps/.env にコピーして各値を設定してください
#   cp .env.example home/.env
#   cp .env.example vps/.env
# ============================================================

# ----------------------------------------------------------
# 基本設定
# ----------------------------------------------------------
DOMAIN=example.com
TZ=Asia/Tokyo

# ----------------------------------------------------------
# Let's Encrypt / TLS（VPS 側で HTTP challenge）
# ----------------------------------------------------------
ACME_EMAIL=admin@example.com

# ----------------------------------------------------------
# OpenLDAP
# ----------------------------------------------------------
LDAP_ORGANISATION=Family Cloud
LDAP_DOMAIN=example.com
LDAP_ADMIN_PASSWORD=changeme-ldap-admin
LDAP_CONFIG_PASSWORD=changeme-ldap-config
LDAP_BASE_DN=dc=example,dc=com

# ----------------------------------------------------------
# PostgreSQL（共有データベース）
# ----------------------------------------------------------
POSTGRES_PASSWORD=changeme-postgres

# Nextcloud 用
POSTGRES_NEXTCLOUD_DB=nextcloud
POSTGRES_NEXTCLOUD_USER=nextcloud
POSTGRES_NEXTCLOUD_PASSWORD=changeme-nc-db

# Matrix Synapse 用
POSTGRES_SYNAPSE_DB=synapse
POSTGRES_SYNAPSE_USER=synapse
POSTGRES_SYNAPSE_PASSWORD=changeme-synapse-db

# Vaultwarden 用
POSTGRES_VAULTWARDEN_DB=vaultwarden
POSTGRES_VAULTWARDEN_USER=vaultwarden
POSTGRES_VAULTWARDEN_PASSWORD=changeme-vw-db

# ----------------------------------------------------------
# Nextcloud
# ----------------------------------------------------------
NEXTCLOUD_ADMIN_USER=admin
NEXTCLOUD_ADMIN_PASSWORD=changeme-nextcloud

# S3 Object Storage（Primary Storage として使用）
S3_ENDPOINT=https://sjc1.vultrobjects.com
S3_ACCESS_KEY=your-s3-access-key
S3_SECRET_KEY=your-s3-secret-key
S3_BUCKET_NEXTCLOUD=example-com-nextcloud
S3_REGION=sjc1

# ----------------------------------------------------------
# Matrix Synapse
# ----------------------------------------------------------
SYNAPSE_SERVER_NAME=example.com
SYNAPSE_REPORT_STATS=no
S3_BUCKET_SYNAPSE=example-com-synapse-media

# ----------------------------------------------------------
# Jitsi Meet
# ----------------------------------------------------------
JITSI_SECRET_JICOFO_COMPONENT=changeme-jicofo-component
JITSI_SECRET_JICOFO_AUTH=changeme-jicofo-auth
JITSI_SECRET_JVB_AUTH=changeme-jvb-auth
JVB_PORT=10000

# ----------------------------------------------------------
# docker-mailserver
# ----------------------------------------------------------
# （メール保存先は自宅 NAS）

# ----------------------------------------------------------
# Vaultwarden
# ----------------------------------------------------------
VAULTWARDEN_SIGNUPS_ALLOWED=true
VAULTWARDEN_ADMIN_TOKEN=changeme-vaultwarden-admin

# ----------------------------------------------------------
# バックアップ（NAS ローカル）
# ----------------------------------------------------------
BACKUP_DIR=/mnt/nas/backup/ofc

# ===========================================================
# パターン4 追加変数 — WireGuard トンネル
# ===========================================================

# ----------------------------------------------------------
# VPS 接続情報
# ----------------------------------------------------------
VPS_IP=203.0.113.1

# ----------------------------------------------------------
# WireGuard 設定
# ----------------------------------------------------------
WG_SERVER_PORT=51820

# WireGuard 鍵ペア（wg genkey / wg pubkey で生成）
WG_SERVER_PRIVATE_KEY=changeme-wg-server-private
WG_SERVER_PUBLIC_KEY=changeme-wg-server-public
WG_CLIENT_PRIVATE_KEY=changeme-wg-client-private
WG_CLIENT_PUBLIC_KEY=changeme-wg-client-public

# WireGuard サブネット
WG_SUBNET=10.100.0.0/24
WG_SERVER_IP=10.100.0.1
WG_CLIENT_IP=10.100.0.2

# ----------------------------------------------------------
# ストレージ（自宅 NAS）
# ----------------------------------------------------------
MAIL_STORAGE_PATH=/mnt/nas/mail
JELLYFIN_MEDIA_PATH=/mnt/nas/media

# JVB の公開 IP（VPS の公開 IP を指定）
JVB_ADVERTISE_IP=203.0.113.1

# ----------------------------------------------------------
# Docker ネットワーク設定（通常変更不要）
# ----------------------------------------------------------
DOCKER_SUBNET=172.20.0.0/16
